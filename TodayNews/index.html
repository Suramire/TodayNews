<html lang="zh" data-theme="light" data-react-helmet="data-theme"><head><meta charset="utf-8"><title>知乎日报 - 知乎</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg"><meta name="description" property="og:description" content="有问题，上知乎。知乎，可信赖的问答社区，以让每个人高效获得可信赖的解答为使命。知乎凭借认真、专业和友善的社区氛围，结构化、易获得的优质内容，基于问答的内容生产方式和独特的社区机制，吸引、聚集了各行各业中大量的亲历者、内行人、领域专家、领域爱好者，将高质量的内容透过人的节点来成规模地生产和分享。用户通过问答等交流方式建立信任和连接，打造和提升个人影响力，并发现、获得新机会。"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.67c7b278.png"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.67c7b278.png" sizes="152x152"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-120.b3e6278d.png" sizes="120x120"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-76.7a750095.png" sizes="76x76"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-60.a4a761d4.png" sizes="60x60"><link rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/static/favicon.ico"><link rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/static/search.xml" title="知乎"><link rel="dns-prefetch" href="//static.zhimg.com"><link rel="dns-prefetch" href="//pic1.zhimg.com"><link rel="dns-prefetch" href="//pic2.zhimg.com"><link rel="dns-prefetch" href="//pic3.zhimg.com"><link rel="dns-prefetch" href="//pic4.zhimg.com"><style>
.u-safeAreaInset-top {
  height: constant(safe-area-inset-top) !important;
  height: env(safe-area-inset-top) !important;
  
}
.u-safeAreaInset-bottom {
  height: constant(safe-area-inset-bottom) !important;
  height: env(safe-area-inset-bottom) !important;
  
}
</style><script defer="" crossorigin="anonymous" src="https://unpkg.zhimg.com/@cfe/sentry-script@latest/dist/init.js" data-sentry-config="{&quot;dsn&quot;:&quot;https://2d8d764432cc4f6fb3bc78ab9528299d@crash2.zhihu.com/1224&quot;,&quot;sampleRate&quot;:0.1,&quot;release&quot;:&quot;162-9ad31451&quot;,&quot;ignoreErrorNames&quot;:[&quot;NetworkError&quot;,&quot;SecurityError&quot;],&quot;ignoreErrors&quot;:[&quot;origin message&quot;,&quot;Network request failed&quot;,&quot;Loading chunk&quot;,&quot;这个系统不支持该功能。&quot;,&quot;Can't find variable: webkit&quot;,&quot;Can't find variable: $&quot;,&quot;内存不足&quot;,&quot;out of memory&quot;,&quot;DOM Exception 18&quot;,&quot;The operation is insecure&quot;,&quot;[object Event]&quot;,&quot;[object FileError]&quot;,&quot;[object DOMError]&quot;,&quot;[object Object]&quot;,&quot;拒绝访问。&quot;,&quot;Maximum call stack size exceeded&quot;,&quot;UploadError&quot;,&quot;无法 fetch&quot;,&quot;draft-js&quot;,&quot;缺少 JavaScript 对象&quot;,&quot;componentWillEnter&quot;,&quot;componentWillLeave&quot;,&quot;componentWillAppear&quot;,&quot;getInlineStyleAt&quot;,&quot;getCharacterList&quot;],&quot;whitelistUrls&quot;:[&quot;static.zhihu.com&quot;]}"></script><script nonce="db70183d-9669-458b-8809-518a7291d01a">if (window.requestAnimationFrame) {    window.requestAnimationFrame(function() {      window.FIRST_ANIMATION_FRAME = Date.now();    });  }</script><style data-emotion-css="1y9335y">.css-1y9335y{background-image:linear-gradient(0,rgba(74,68,52,1),rgba(74,68,52,0.9),rgba(74,68,52,0));}</style><style data-emotion="css"></style></head><body class="Daily-body Body--isAppleDevice Body--Safari" data-react-helmet="class"><div id="root"><div class="App"><div class="LoadingBar"></div><main role="main" class="App-main"><div><div class="Daily"></div><header class="DailyHeader"><div class="DailyHeader-image"><img src="https://pic1.zhimg.com/v2-126e0df3181fc087c7e4335eacc5cba0_fhd.jpg" alt="头图"><div class="css-1y9335y"></div></div><p class="DailyHeader-title" style="font-size: 22px;">想检测游戏里两个物体有没有发生碰撞，原来这么难</p><p class="DailyHeader-imageSource">VladArtist / CC0</p></header><section class="DailyRichText DailyRichText-withTitle" style="font-size: 16px;"><div class="RichText ztext"><div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">游戏中有哪些看上去很简单，但实际上需要极高技术力或是极高成本的细节？</h2>

<div class="answer">

<div class="ZhihuDaily-AuthorLine"><span class="ZhihuDaily-Author">作者 / DBinary</span></div>

<div class="content">
<p>&nbsp;</p>
<p>游戏里有一个即使是小学生也会做，但博士生都未必做的好的问题。</p>
<p>它是如此常见，几乎出现在除了&lt;&gt;外的所有的 FPS 游戏和绝大部分的 RTS 中。</p>
<p>如果你打游戏发现你的 CPU 烫得可以煎牛排，那么当中恐怕有一半的热量和这玩意多多少少有所关联。</p>
<p>它看上去真的超简单，我甚至不用堆些专业术语大家都看得懂，但在你没有真正把这玩意做出来之前，你对这玩意所述的一切算法和理论和不屑，都是在"云"。</p>
<p>说了那么多，那么这玩意到底是啥，其实真也不是啥高大上的东西，这玩意叫<strong>碰撞检测</strong>。简单来说，就是判断游戏里两个物体有没有碰撞。我们先来举个最简单的栗子</p>
<figure><img class="content-image" src="https://pic3.zhimg.com/v2-35bc80da70c52b7d95568a2509a20fc6_b.jpg" alt=""></figure><p>ObjectA 和 ObjectB 是游戏世界中的两个圆，如何判断它们有没有碰撞，你可能开始骂我了，因为只要长了眼睛就能看出来这两个圆没碰在一起。但可惜我们不能靠眼睛这么玩，计算机有计算机的玩法，当然，这仍然很简单。</p>
<figure><img class="content-image" src="https://pic3.zhimg.com/v2-01cb892512a91bf31e518c39ee514d52_b.jpg" alt=""></figure><p>设 Object A 的圆心坐标为（x1，y1）半径为 r1，设 Object B 的圆心坐标为（x2，y2）半径为 r2，然后我们计算圆心之间的距离 d 和 r1+r2，如果 d&lt;=r1+r2，那么这两个圆毫无疑问是碰撞在一起的，如果 d&gt;r1+r2，那么这两个圆就没碰在一起，如果你是码农你可能会用<img class="content-image" src="https://www.zhihu.com/equation?tex=d%5E%7B2%7D" alt="">和<img class="content-image" src="https://www.zhihu.com/equation?tex=%28r_1%2Br_2%29%5E2" alt="">来比较，这样就可能不用计算一次可能更耗时的开平方，不过没关系，这无关痛痒，这仍然超简单的是不。</p>
<p>没关系，显然大部分游戏中只有 2 个 Object 的情况毕竟是少数，显然我们需要考虑 2 个以上 Object 的情况，比如说 3 个：</p>
<figure><img class="content-image" src="https://pic1.zhimg.com/v2-9efcd36582cb4d3e6d0d1a0985e2d3a4_b.jpg" alt=""></figure><p>那么，如何判断这三个 Object 相互之间有没有碰撞关系呢，其实这也不是事儿，比如说上面三个 Object，我们只需要依据两两碰撞的办法，分别判断 A 和 B，A 和 C，B 和 C 之间有没有碰撞在一起就行了，我相信很大一部分初学了 C 语言，想做一个弹幕游戏大部分就使用了上面这个办法。</p>
<p>但如果我们把 Object 数量加到 4 个，问题就来了。我们发现 2 个 Object 的时候，我们只需要计算一次碰撞判断，有 3 个 Object 的时候，这个计算增加到了 3 次，如果这个 Object 增加到了 4 个，那我们就需要计算 A-B，A-C，A-D，B-C，B-D，C-D 一共是 6 次碰撞检测计算。</p>
<p>当然，6 次对于计算机来说这并不算什么，依据这种算法碰撞次数如果游戏中有 n 个 Object，我们就需要计算&nbsp;<img class="content-image" src="https://www.zhihu.com/equation?tex=%5Csum_%7Bi%3D1%7D%5E%7Bn-1%7D%7Bi%7D" alt="">&nbsp;次碰撞，比如 101 个 Object 我们需要计算 100+99+98+97+……1，共计 5050 次碰撞，当然对 CPU 来说这仍然不算什么。但如果这个游戏是一个多人大型战场类游戏，你发现阵地上有 1000 发炮弹在到处飞时，你就可以闻到 CPU 的香气了。</p>
<p>当然，要解决上面这个问题依然不是什么很难的事情，比如下面这种情况，一个游戏场景中有 4 个 Object：</p>
<figure><img class="content-image" src="https://pic1.zhimg.com/v2-1e8e88346f81bdef2795414b34b8946c_b.jpg" alt=""></figure><p>我们把整个游戏世界均等分为 4 份</p>
<figure><img class="content-image" src="https://pic4.zhimg.com/v2-aa407d9d3cdbac6fd0b094950e43d83b_b.jpg" alt=""></figure><p>显然，我们可以先给游戏世界里的 Object 分个类，首先 A 和 B 在第一个区域，C 和 D 在第 4 个区域，显然的，不同区域之间的 Object 显然是不会碰撞在一起的，于是，我们只需要 2 次碰撞计算就可以得出碰撞结果了。这个算法又叫四叉树碰撞检测算法，按树结构的理解是，我们建立了一个有四个子节点的树结构，然后把游戏里的对象划分进去，没关系，反正其算法的原理大致就是一个分治的思想，不管怎么说，这确实很好地优化了碰撞检测的时间复杂度。</p>
<p>到这一步，你呵呵一乐，就这？也没见多复杂啊，放心，相当一部分码农的理论也就到了这一步，所以成就了很多的"云码农"，坐好，现在我们开始加速了。</p>
<p>某天你和你的基（姬）友相约上线吃鸡，图上每一个圆点代表着一个人，显然区域 4 肥得流油导致很多玩家纷纷下饺子，那么这个时候，四叉树分割的算法显然就不能发挥其最大的优势了，毕竟大部分的节点都分布在了区域 4 中：</p>
<figure><img class="content-image" src="https://pic1.zhimg.com/v2-e1523b2330d9168d15b891ff46649c24_b.jpg" alt=""></figure><p>你说，这好办啊，兵来将挡水来土掩，我们对区域 4 再进行一次四叉树分割不就好了</p>
<figure><img class="content-image" src="https://pic4.zhimg.com/v2-1689163f46738af59e29bb1e5a3cd0df_b.jpg" alt=""></figure><p>你看，问题很好的解决了，这不也没啥大不了的不是，你甚至表示如果区域 4 里的 object 再多一点，你可以再分一次</p>
<p>当你说到这句话的时候，你恐怕现在心里也有点发虚了，因为你注意到上面的分割算法中，有些 Object 是横跨了多个区域的</p>
<figure><img class="content-image" src="https://pic2.zhimg.com/v2-b632f48958dae3450525b845a0630af1_b.jpg" alt=""></figure><p>就比如上图中两个用蓝色框框框出来的那两个 Object，它们横跨了两个区域，这也就意味着，你必须对这两个 Object 进行分片。也就是说，四叉树的多个叶子需要同时存储这个 Object 的节点，实际上四叉树算法看上去很美，实际上对 Object 的分类实际上也是做了一次碰撞检测，当然横跨 2 个区域的情况并不是那么极端，假如现在一个玩家他变身成了奥特曼，变成了一个无比庞大的 Object（如下图的蓝色区域）：</p>
<figure><img class="content-image" src="https://pic4.zhimg.com/v2-d0fe2e6b0779024db5306ce06ee89153_b.jpg" alt=""></figure><p>你发现，这个时候四叉树的优化对这个节点毫无作用，你还需要承担这个节点分割带来的额外性能开销，出现了一个负优化的结果，那么这个时候你该怎么办呢？这个时候恐怕有人会说，把这个那么大的 object 存储在四叉树的父节点不就行了，我们不分片，只要这个 Object 占据了所有子节点的区域，那么就将它存储在父节点中。</p>
<p>当然，如果只是"云代码"的话，上面的处理是成立的，但是实际要做的话，上面的处理是沙雕的，没法搞的，纸上谈兵的。因为在四叉树的分类中，节点是一个一个添加进去的，你无法控制这个四叉树什么时候会进行进一步的划分，比如上面这个蓝色 Object 现在它当然占据了整个地图的所有节点，但是当最右下角的区域出现越来越多新的 Object 不得不进行进一步分片时，你就会发现这个蓝色的 Object 在父节点中待不下去了。</p>
<figure><img class="content-image" src="https://pic1.zhimg.com/v2-eddfb37f71a51a3e8a81882b33c4b0a8_b.jpg" alt=""></figure><p>好了，一旦出现这个情况，这个大型 Object 不再能待在覆盖所有子节点中的父节点了，你将不得不再对这个大型的 Object 进行一次额外开销的分片计算，然后再将它重新分发到各个子节点中。如果这种非常大的 Object 还很多的话，你发现你还不如一开始就将它进行分片呢。但这个办法并非不可取，如果你知道你游戏里这种比较大的 Object 并不多，这种父节点存储法也许真能对碰撞的复杂度进行优化，所以这仍然是我们说的，不同情况不同考虑，真以为四叉树就长这个样能解决所有的碰撞处理算法，抱歉，不存在的。</p>
<p>好了，到这里现在开始，碰撞检测我就要只提问题不说解决办法了，为啥，因为难啊，不同情况需要依据游戏的情况进行不同情况的优化，我只是向你展示的是，碰撞检测并不像看上去那么简单。它仍然存在一堆问题需要你去解决。</p>
<p>那么我们再举个栗子：</p>
<figure><img class="content-image" src="https://pic3.zhimg.com/v2-029c0f8e49dedad89e90c5f3227edd92_b.jpg" alt=""></figure><p>问，上图中现在 ObjectA 是一个子弹，ObjectB 是一个怪兽，ObjectA 和 ObjectB 发生了碰撞，碰撞了几次？</p>
<p>你可能很疑惑为什么我问了这样一个问题，但它确实是四叉树分片带来的又一个问题，如果 A，B 进行了分片，那么首先在分片过程中，A 和 B 因为分片同时存在了四叉树分割的两个区域中，这意味着在四叉树的最终计算结果中，它将在两个不同的区域都发生了碰撞，碰撞了两次，如果不将重复的碰撞结果进行剔除，那么，这个怪兽将会承受这个子弹带来的双倍伤害，当然怪兽这样都得偷着乐了，要是子弹和它刚好在四叉树的中间区域也就是横跨了四个区域，那么它将承受因为四叉树优化带来的四倍伤害。那么，你会如何剔除重复碰撞呢，当然，你得好好想想这个问题，不然你的四叉树优化，可能又是个负优化。</p>
<p>截至目前，你看虽然我们讨论的是碰撞检测，仅仅一个四叉树就带来了那么多乱七八糟的问题了，没关系，我们现在讨论的还是算法方面的，如果你实际操刀写代码的话，你有没有想过四叉树是一个动态的结构，我们如何给四叉树的节点分配内存呢，</p>
<p>malloc？new？</p>
<p>用了你就傻了，如果一个游戏里有 100 个 object，那么创建四叉树结构至少需要 100 次分配节点，这也就意味着你很可能需要向系统申请 100 次节点的内存，然后再用 100 次 delete 或者 free 释放掉，真的，你还不如不用四叉树呢，内存的分配与释放，可能比你直接计算碰撞还要慢，而且还能带来一堆内存碎片和缓存命中带来的一堆问题。</p>
<p>于是你不得不重新接管内存的管理方式比如使用一个内存池来对这个四叉树结构进行管理，得，我们成功将碰撞检测这一个算法上的问题上升到了内存管理上的另一个问题，而且这两个问题你都得好好解决。因为不同类型的游戏，类似上面四叉树的空间划分算法还有很多，同时也带来了更多海量的问题，</p>
<p>你会发现你很难找到一个万金油类型的碰撞检测算法，依据这个游戏的不同，你得分类考虑，然后在性能与游戏体验上找到一个平衡点，当然目前很多的游戏引擎并不需要你考虑这些碰撞算法，显然的，如果使用通用的算法，你就得在性能与空间上付出点代价。</p>
<p>到这里你可能吐了一口气，原来还真是有些麻烦啊，抱歉，上面的东西考虑的只能说是凑活能用，其实只是冰山一角。</p>
<p>因为游戏世界里的 Object，不是长的都是规规矩矩的一个圆。</p>
<p>有这样的：</p>
<figure><img class="content-image" src="https://pic4.zhimg.com/v2-c2ce07fac2c0a03d66a26ac86b345cbf_b.jpg" alt=""></figure><p>还有这样的：</p>
<figure><img class="content-image" src="https://pic2.zhimg.com/v2-7aa7fce312b93aaf1c88c03dc9b306f9_b.jpg" alt=""></figure><p>当然，不规则几何的碰撞检测还只是"碰撞检测"，还没上升到"碰撞"问题的处理上来，比如隧穿效应和 PUBG 里的名场面粘滞效应。</p>
<p>现在我们再来聊聊游戏世界是如何运行的，游戏世界的时间和我们现实世界的时间有所不一样，例如一辆汽车在高速公路上飞驰一秒钟，那么你可以得出它在 0.12345 秒时，这辆车的位置与状态，但如果这辆车跑在游戏世界中，这恐怕就办不到了。</p>
<p>在游戏世界中，时间是离散的，一个称作游戏循环的逻辑结构控制着游戏世界的运行，一个称作时间粒度的变量是游戏世界时间运行的最小单位，在大多数情况下这个单位不会被进一步的细分。</p>
<p>在每个游戏循环中，会对游戏世界中的每一个对象进行一次更新（当然有时会对视口外或一些静态对象优化），举个栗子，如果游戏世界的时间粒度是 10ms，那么，游戏世界将会计算 10ms，20ms，30ms……时游戏世界中对象的状态。</p>
<figure><img class="content-image" src="https://pic4.zhimg.com/v2-02ee8ee5091e9ad93a1904a26e069117_b.jpg" alt=""></figure><p>正因为这种运行方式，你会发现游戏世界的模拟并不能直接使用一些连续的函数来描述，例如游戏中弹道的计算或者抛物线方程，在游戏世界中未必好使，这类方程在现实中计算十分方便，毕竟我们可以直接用微积分等手段来计算出具体时间时的位置，速度，但在游戏中引用这类方程大多控制不便不利于优化设计复杂，这涉及一个将连续函数离散化的问题，因此，在一个游戏循环中，比如 10ms-20ms 这段时间里，在游戏世界中我们大多将这段时间的受力或者速度当做一个恒定的值因此你会发现，如果你要控制一个物体做抛物线运动，其最终的落点和你使用抛物线方程的落点最终会有所不一样，可以这么说，尽管 PUBG 游戏如何宣称这是一款真实的物理引擎，其最终都只是一个广告词，它与真实世界的模拟仍然有诸多的差别。</p>
<p>这类离散的差别也导致了一些很有意思的 bug，其中一个便是遂穿效应，例如在上面的图中，10ms 和 20ms 中出现了一堵墙。</p>
<figure><img class="content-image" src="https://pic4.zhimg.com/v2-6ed382f99188c9bea0a8658711da6c73_b.jpg" alt=""></figure><p>那么，这个碰撞根本不会发生，就好像汽车穿过了这堵墙一样，如果要避免这种情况，要么把墙体的宽度变宽点，要么就减少时间粒度比如控制在 5ms。</p>
<figure><img class="content-image" src="https://pic3.zhimg.com/v2-04dfcd7f1435ba0efa16ba621e71a692_b.jpg" alt=""><figcaption>放大墙体宽度</figcaption></figure><figure><img class="content-image" src="https://pic1.zhimg.com/v2-86cca9440be435aac3e8624df6cb7d08_b.jpg" alt=""><figcaption>减少时间粒度</figcaption></figure><p>但正如你所知道的一样，因为每次循环都需要对游戏中所有需要更新的物体进行一次计算，因此，减少时间粒度所耗费的性能损耗往往是非常明显的，在大多数情况下，游戏设计人员会刻意减少游戏里物体的速度或者说使用第一种办法把物体做的厚一点。</p>
<p>另一个很有意思的 bug 是粘滞，这也是碰撞检测方面的 bug，在众多即使是 3A 大作的游戏中，这个 bug 也非常的常见并且优化困难，避免需要耗费巨大的代价，我们同样举个栗子。</p>
<figure><img class="content-image" src="https://pic2.zhimg.com/v2-5b3997c8e06c81d33eb8eaafe1a1f121_b.jpg" alt=""></figure><p>在上图中，一辆车装上了一个球，因为时间粒度关系，当碰撞发生时，车已经嵌入到球当中了，这个时候碰撞已经发生，按照"真实的物理引擎"计算，车应该受到一个立即的反作用力，并速度方向应该立即变为反方向：</p>
<figure><img class="content-image" src="https://pic2.zhimg.com/v2-f2e63bb76ac80c18d0877bf0ffd1ae29_b.jpg" alt=""></figure><p>但是，因为碰撞存在能量损失，因此，回退的速度会比撞击时的瞬时速度更慢，导致了在下一次游戏循环时，车仍然没有脱离球的范围，这导致了物理引擎认为，车第二次撞上了球（实际碰撞只发生了一次），于是车又改变了速度方向，再次撞入了球，因为速度再次衰减，所以车就和这个球粘上了，如果两者状态不改变将并永远不会脱离：</p>
<figure><img class="content-image" src="https://pic4.zhimg.com/v2-0e4a561d9ec5141422861a4c12d25933_b.jpg" alt=""></figure><p>这就导致了两个物体黏在一块，两边反复抖动，最终导致了神奇的鬼畜现象，如果碰撞是有伤害的，那么就会导致粘滞发生后不久就会瞬间爆炸：</p>
<figure><img class="content-image" src="https://pic1.zhimg.com/v2-a61465f96e1c36de0d3fa2368c46d8ec_b.gif" alt=""><figcaption>出自天天吃鸡</figcaption></figure><figure><img class="content-image" src="https://pic4.zhimg.com/v2-de5739baf3cd1bc4cbe6a01f18f39107_b.gif" alt=""><figcaption>出自天天吃鸡</figcaption></figure><p>写了那么多，但其实碰撞检测有关的东西远不止上面说的那么点，游戏引擎开发的事儿，说多了都是泪，很多东西看上去很简单。但经验告诉我常常是理想很丰满现实很骨感。在做出来之前一切的感觉只是感觉。</p>
<figure></figure>
</div>
</div>


<a class="view-more" href="https://www.zhihu.com/question/405291121">进入「知乎」查看相关讨论</a>

</div>


</div>
</div><script type="“text/javascript”">window.daily=true</script></div></section></div></main><div class="CornerButtons"><div class="CornerAnimayedFlex CornerAnimayedFlex--hidden"><button data-tooltip="回到顶部" data-tooltip-position="left" data-tooltip-will-hide-on-click="true" aria-label="回到顶部" type="button" class="Button CornerButton Button--plain"><svg class="Zi Zi--BackToTop" aria-label="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"></path></svg></button></div></div></div></div><script nonce="db70183d-9669-458b-8809-518a7291d01a" async="" src="https://www.googletagmanager.com/gtag/js?id=UA-149949619-1"></script><script nonce="db70183d-9669-458b-8809-518a7291d01a">function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-149949619-1");</script><script id="js-clientConfig" type="text/json">{"host":"zhihu.com","protocol":"https:","wwwHost":"www.zhihu.com","fetchRoot":{"www":"https:\u002F\u002Fwww.zhihu.com","api":"https:\u002F\u002Fapi.zhihu.com","zhuanlan":"https:\u002F\u002Fzhuanlan.zhihu.com"}}</script><script id="js-initialData" type="text/json">{"initialState":{"common":{"ask":{}},"loading":{"global":{"count":0},"local":{"daily\u002FgetDailyStory\u002F":false}},"club":{"profile":{},"statistics":{},"comments":{"paging":{},"loading":{},"ids":{}},"memberRankings":{},"loginMasks":{},"explore":{},"search":{},"admins":{"data":[]},"tags":{},"postList":{"paging":{},"loading":{},"ids":{}},"application":{"profile":null,"currentApplication":null,"categorySelect":{"categories":[]}},"checkin":{},"recommend":{"data":[]},"memberApplication":{"data":[]},"activity":{"mindMatches":{}},"members":{"data":[]},"discovery":{},"silences":{"data":[]}},"entities":{"users":{},"questions":{},"answers":{},"articles":{},"columns":{},"topics":{},"roundtables":{},"favlists":{},"comments":{},"notifications":{},"ebooks":{},"activities":{},"feeds":{},"pins":{},"promotions":{},"drafts":{},"chats":{},"posts":{},"clubs":{},"clubTags":{}},"currentUser":"","account":{"lockLevel":{},"unlockTicketStatus":false,"unlockTicket":null,"challenge":[],"errorStatus":false,"message":"","isFetching":false,"accountInfo":{},"urlToken":{"loading":false}},"settings":{"socialBind":null,"inboxMsg":null,"notification":{},"email":{},"privacyFlag":null,"blockedUsers":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"blockedFollowees":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"ignoredTopics":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"restrictedTopics":null,"laboratory":{}},"notification":{},"people":{"profileStatus":{},"activitiesByUser":{},"answersByUser":{},"answersSortByVotesByUser":{},"answersIncludedByUser":{},"votedAnswersByUser":{},"thankedAnswersByUser":{},"voteAnswersByUser":{},"thankAnswersByUser":{},"topicAnswersByUser":{},"zvideosByUser":{},"articlesByUser":{},"articlesSortByVotesByUser":{},"articlesIncludedByUser":{},"pinsByUser":{},"questionsByUser":{},"commercialQuestionsByUser":{},"favlistsByUser":{},"followingByUser":{},"followersByUser":{},"mutualsByUser":{},"followingColumnsByUser":{},"followingQuestionsByUser":{},"followingFavlistsByUser":{},"followingTopicsByUser":{},"publicationsByUser":{},"columnsByUser":{},"allFavlistsByUser":{},"brands":null,"creationsByUser":{},"creationsSortByVotesByUser":{},"creationsFeed":{}},"env":{"ab":{"config":{"experiments":[{"expId":"launch-qa_cl_guest-2","expPrefix":"qa_cl_guest","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_foltopic_user-10","expPrefix":"us_foltopic_user","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_bullet_second-2","expPrefix":"vd_bullet_second","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_profile_video-11","expPrefix":"vd_profile_video","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_timeguide-2","expPrefix":"vd_timeguide","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_replay-3","expPrefix":"vd_video_replay","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_zvideo_link-10","expPrefix":"vd_zvideo_link","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vd_bullet_gui-1","expPrefix":"vd_bullet_gui","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vd_vserial-3","expPrefix":"vd_vserial","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false}],"params":[{"id":"gue_push2follow","type":"String","value":"0"},{"id":"gue_q_share","type":"String","value":"0"},{"id":"web_unfriendly_comm","type":"String","value":"0"},{"id":"se_v_rate","type":"String","value":"0","chainId":"_all_"},{"id":"top_root","type":"String","value":"0","chainId":"_all_"},{"id":"gue_bullet_second","type":"String","value":"1"},{"id":"gue_video_replay","type":"String","value":"2"},{"id":"ls_recommend_test","type":"String","value":"0","chainId":"_all_"},{"id":"zr_km_answer","type":"String","value":"open_cvr","chainId":"_all_"},{"id":"se_colorfultab","type":"String","value":"1","chainId":"_all_"},{"id":"se_video200","type":"String","value":"1","chainId":"_all_"},{"id":"tp_sft","type":"String","value":"a","chainId":"_all_"},{"id":"ls_fmp4","type":"String","value":"0","chainId":"_all_"},{"id":"gue_card_test","type":"String","value":"1"},{"id":"se_bert128","type":"String","value":"0","chainId":"_all_"},{"id":"web_audit_01","type":"String","value":"case1"},{"id":"tp_topic_tab_new","type":"String","value":"0-0-0","chainId":"_all_"},{"id":"tp_zrec","type":"String","value":"0","chainId":"_all_"},{"id":"gue_video_guide","type":"String","value":"1"},{"id":"gue_sharp","type":"String","value":"0"},{"id":"zr_search_sim2","type":"String","value":"0","chainId":"_all_"},{"id":"se_college","type":"String","value":"default","chainId":"_all_"},{"id":"se_searchwiki","type":"String","value":"0","chainId":"_all_"},{"id":"tp_club_bt","type":"String","value":"0","chainId":"_all_"},{"id":"tp_club_feed","type":"String","value":"0","chainId":"_all_"},{"id":"pf_fuceng","type":"String","value":"1","chainId":"_all_"},{"id":"web_enforce_qr","type":"String","value":"0"},{"id":"web_heifetz_grow_ad","type":"String","value":"1"},{"id":"li_catalog_card","type":"String","value":"1","chainId":"_all_"},{"id":"li_answer_card","type":"String","value":"0","chainId":"_all_"},{"id":"zr_search_paid","type":"String","value":"1","chainId":"_all_"},{"id":"gue_v_serial","type":"String","value":"2"},{"id":"li_ebook_gen_search","type":"String","value":"0","chainId":"_all_"},{"id":"web_answerlist_ad","type":"String","value":"0"},{"id":"tp_header_style","type":"String","value":"1","chainId":"_all_"},{"id":"top_v_album","type":"String","value":"1","chainId":"_all_"},{"id":"se_v_drop","type":"String","value":"0","chainId":"_all_"},{"id":"se_sug_term","type":"String","value":"0","chainId":"_all_"},{"id":"top_test_4_liguangyi","type":"String","value":"1","chainId":"_all_"},{"id":"pf_adjust","type":"String","value":"0","chainId":"_all_"},{"id":"qap_labeltype","type":"String","value":"1","chainId":"_all_"},{"id":"se_hi_trunc","type":"String","value":"0","chainId":"_all_"},{"id":"tp_club_qa_entrance","type":"String","value":"1","chainId":"_all_"},{"id":"se_major","type":"String","value":"0","chainId":"_all_"},{"id":"se_col_boost","type":"String","value":"0","chainId":"_all_"},{"id":"tp_topic_tab","type":"String","value":"0","chainId":"_all_"},{"id":"tsp_ios_cardredesign","type":"String","value":"0","chainId":"_all_"},{"id":"gue_art2qa","type":"String","value":"0"},{"id":"zr_search_topic","type":"String","value":"0","chainId":"_all_"},{"id":"se_t2sug","type":"String","value":"0","chainId":"_all_"},{"id":"tp_discover","type":"String","value":"0","chainId":"_all_"},{"id":"li_svip_cardshow","type":"String","value":"1","chainId":"_all_"},{"id":"se_return_1","type":"String","value":"0","chainId":"_all_"},{"id":"tp_m_intro_re_topic","type":"String","value":"1","chainId":"_all_"},{"id":"gue_zvideo_link","type":"String","value":"1"},{"id":"li_video_section","type":"String","value":"0","chainId":"_all_"},{"id":"se_auth_src","type":"String","value":"0","chainId":"_all_"},{"id":"li_topics_search","type":"String","value":"0","chainId":"_all_"},{"id":"li_panswer_topic","type":"String","value":"0","chainId":"_all_"},{"id":"se_adsrank","type":"String","value":"4","chainId":"_all_"},{"id":"se_videobox","type":"String","value":"0","chainId":"_all_"},{"id":"se_v046","type":"String","value":"0","chainId":"_all_"},{"id":"tsp_ioscard2","type":"String","value":"0","chainId":"_all_"},{"id":"zr_art_rec","type":"String","value":"base","chainId":"_all_"},{"id":"zr_training_first","type":"String","value":"false","chainId":"_all_"},{"id":"se_aa_base","type":"String","value":"0","chainId":"_all_"},{"id":"se_zp_boost","type":"String","value":"0","chainId":"_all_"},{"id":"gue_bullet_guide","type":"String","value":"发个弹幕聊聊…"},{"id":"zr_expslotpaid","type":"String","value":"1","chainId":"_all_"},{"id":"zr_topic_rpc","type":"String","value":"0","chainId":"_all_"},{"id":"web_pcleft","type":"String","value":"0"},{"id":"zr_zr_search_sims","type":"String","value":"0","chainId":"_all_"},{"id":"zr_slotpaidexp","type":"String","value":"1","chainId":"_all_"},{"id":"top_ebook","type":"String","value":"0","chainId":"_all_"},{"id":"gue_zvideo_title","type":"String","value":"0"},{"id":"gue_visit_n_artcard","type":"String","value":"0"},{"id":"tp_club_fdv4","type":"String","value":"0","chainId":"_all_"},{"id":"li_paid_answer_exp","type":"String","value":"0","chainId":"_all_"},{"id":"web_collection_guest","type":"String","value":"1"},{"id":"zr_test_aa1","type":"String","value":"0","chainId":"_all_"},{"id":"se_mobilecard","type":"String","value":"0","chainId":"_all_"},{"id":"li_car_meta","type":"String","value":"0","chainId":"_all_"},{"id":"li_vip_verti_search","type":"String","value":"0","chainId":"_all_"},{"id":"gue_self_censoring","type":"String","value":"1"},{"id":"zr_rel_search","type":"String","value":"base","chainId":"_all_"},{"id":"se_whitelist","type":"String","value":"0","chainId":"_all_"},{"id":"se_v_v006","type":"String","value":"0","chainId":"_all_"},{"id":"pf_newguide_vertical","type":"String","value":"0","chainId":"_all_"},{"id":"ug_newtag","type":"String","value":"1","chainId":"_all_"},{"id":"gue_article_sicon","type":"String","value":"0"},{"id":"gue_share_icon","type":"String","value":"0"},{"id":"zr_slot_training","type":"String","value":"1","chainId":"_all_"},{"id":"se_web0answer","type":"String","value":"0","chainId":"_all_"},{"id":"se_searchvideo","type":"String","value":"3","chainId":"_all_"},{"id":"tp_dingyue_video","type":"String","value":"0","chainId":"_all_"},{"id":"pf_creator_card","type":"String","value":"1","chainId":"_all_"},{"id":"web_v_render","type":"String","value":"normal"},{"id":"web_column_auto_invite","type":"String","value":"0"},{"id":"se_major_v2","type":"String","value":"0","chainId":"_all_"},{"id":"tp_contents","type":"String","value":"2","chainId":"_all_"},{"id":"pf_noti_entry_num","type":"String","value":"0","chainId":"_all_"},{"id":"ls_video_commercial","type":"String","value":"0","chainId":"_all_"},{"id":"zr_training_boost","type":"String","value":"false","chainId":"_all_"},{"id":"se_club_ui","type":"String","value":"0","chainId":"_all_"},{"id":"soc_feed_intelligent","type":"String","value":"0","chainId":"_all_"},{"id":"top_quality","type":"String","value":"0","chainId":"_all_"},{"id":"tsp_adcard2","type":"String","value":"0","chainId":"_all_"},{"id":"ug_follow_topic_1","type":"String","value":"2","chainId":"_all_"},{"id":"ls_videoad","type":"String","value":"2","chainId":"_all_"},{"id":"gue_repost","type":"String","value":"0"},{"id":"qap_question_visitor","type":"String","value":" 0","chainId":"_all_"},{"id":"zr_ans_rec","type":"String","value":"gbrank","chainId":"_all_"},{"id":"gue_profile_video","type":"String","value":"1"},{"id":"web_sem_ab","type":"String","value":"1"},{"id":"web_answer_list_ad","type":"String","value":"1"},{"id":"se_ffzx_jushen1","type":"String","value":"0","chainId":"_all_"},{"id":"se_v_v005","type":"String","value":"0","chainId":"_all_"},{"id":"tp_topic_style","type":"String","value":"0","chainId":"_all_"},{"id":"li_viptab_name","type":"String","value":"0","chainId":"_all_"},{"id":"gue_goods_card","type":"String","value":"0"},{"id":"web_creator_route","type":"String","value":"1"},{"id":"li_svip_tab_search","type":"String","value":"1","chainId":"_all_"},{"id":"zw_sameq_sorce","type":"String","value":"999","chainId":"_all_"},{"id":"se_topicfeed","type":"String","value":"0","chainId":"_all_"},{"id":"tp_club__entrance2","type":"String","value":"1","chainId":"_all_"},{"id":"top_universalebook","type":"String","value":"1","chainId":"_all_"},{"id":"gue_art_sani","type":"String","value":"0"},{"id":"se_click_v_v","type":"String","value":"0","chainId":"_all_"},{"id":"se_wil_act","type":"String","value":"0","chainId":"_all_"},{"id":"tp_meta_card","type":"String","value":"0","chainId":"_all_"},{"id":"tsp_ad_cardredesign","type":"String","value":"0","chainId":"_all_"},{"id":"pf_profile2_tab","type":"String","value":"0","chainId":"_all_"},{"id":"web_ad_banner","type":"String","value":"0"},{"id":"gue_q_intercept","type":"String","value":"0"},{"id":"se_entity22","type":"String","value":"0","chainId":"_all_"},{"id":"li_yxzl_new_style_a","type":"String","value":"1","chainId":"_all_"},{"id":"qap_question_author","type":"String","value":"0","chainId":"_all_"},{"id":"zr_intervene","type":"String","value":"0","chainId":"_all_"},{"id":"tp_club_entrance","type":"String","value":"1","chainId":"_all_"},{"id":"tsp_hotlist_ui","type":"String","value":"1","chainId":"_all_"},{"id":"zr_rec_answer_cp","type":"String","value":"open","chainId":"_all_"},{"id":"se_content0","type":"String","value":"1","chainId":"_all_"},{"id":"se_v_bert2","type":"String","value":"0","chainId":"_all_"},{"id":"soc_notification","type":"String","value":"1","chainId":"_all_"},{"id":"pf_foltopic_usernum","type":"String","value":"50","chainId":"_all_"},{"id":"se_oneboxtopic","type":"String","value":"1","chainId":"_all_"},{"id":"tp_club_top","type":"String","value":"0","chainId":"_all_"},{"id":"tp_clubhyb","type":"String","value":"0","chainId":"_all_"}],"chains":[{"chainId":"_all_"}]},"triggers":{}},"userAgent":{"Edge":false,"Wechat":false,"Weibo":false,"QQ":false,"MQQBrowser":false,"Qzone":false,"Mobile":false,"Android":false,"iOS":false,"isAppleDevice":true,"Zhihu":false,"ZhihuHybrid":false,"isBot":false,"Tablet":false,"UC":false,"Sogou":false,"Qihoo":false,"Baidu":false,"BaiduApp":false,"Safari":true,"GoogleBot":false,"AndroidDaily":false,"iOSDaily":false,"WxMiniProgram":false,"BaiduMiniProgram":false,"QQMiniProgram":false,"isWebView":false,"isMiniProgram":false,"origin":"Mozilla\u002F5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit\u002F605.1.15 (KHTML, like Gecko) Version\u002F13.1.1 Safari\u002F605.1.15"},"appViewConfig":{"can_auto_load_image":true,"font_resize":1},"ctx":{"path":"\u002Fstory\u002F9725890","query":{"font_resize":null,"can_auto_load_image":true},"href":"http:\u002F\u002Fdaily.zhihu.com\u002Fstory\u002F9725890","host":"daily.zhihu.com"},"trafficSource":"production","edition":{"beijing":false,"baidu":false,"sogou":false,"baiduBeijing":false,"sogouBeijing":false,"sogouInput":false,"baiduSearch":false,"googleSearch":false,"miniProgram":false},"theme":"light","enableShortcut":true,"referer":"","conf":{},"xTrafficFreeOrigin":"","ipInfo":{},"logged":false},"me":{"columnContributions":[]},"label":{"recognizerLists":{}},"ecommerce":{},"favlists":{"relations":{}},"question":{"followers":{},"concernedFollowers":{},"answers":{},"hiddenAnswers":{},"updatedAnswers":{},"collapsedAnswers":{},"notificationAnswers":{},"invitedQuestions":{"total":{"count":null,"isEnd":false,"isLoading":false,"questions":[]},"followees":{"count":null,"isEnd":false,"isLoading":false,"questions":[]}},"laterQuestions":{"count":null,"globalWriteAnimate":false,"isEnd":false,"isLoading":false,"questions":[]},"waitingQuestions":{"hot":{"isEnd":false,"isLoading":false,"questions":[]},"value":{"isEnd":false,"isLoading":false,"questions":[]},"newest":{"isEnd":false,"isLoading":false,"questions":[]},"easy":{"isEnd":false,"isLoading":false,"questions":[]}},"invitationCandidates":{},"inviters":{},"invitees":{},"similarQuestions":{},"relatedCommodities":{},"bio":{},"brand":{},"permission":{},"adverts":{},"advancedStyle":{},"commonAnswerCount":0,"hiddenAnswerCount":0,"meta":{},"bluestarRanklist":{},"relatedSearch":{},"autoInvitation":{},"simpleConcernedFollowers":{},"draftStatus":{},"disclaimers":{}},"banner":{},"comments":{"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"parent":{}},"commentsV2":{"stickers":[],"commentWithPicPermission":{},"notificationsComments":{},"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"conversationMore":{},"parent":{}},"answers":{"voters":{},"copyrightApplicants":{},"favlists":{},"newAnswer":{},"concernedUpvoters":{},"simpleConcernedUpvoters":{},"paidContent":{},"settings":{}},"switches":{},"video":{"data":{},"shareVideoDetail":{},"last":{}},"sms":{"supportedCountries":[]},"daily":{"story":{"body":"\u003Cdiv class=\"main-wrap content-wrap\"\u003E\n\u003Cdiv class=\"headline\"\u003E\n\n\u003Cdiv class=\"img-place-holder\"\u003E\u003C\u002Fdiv\u003E\n\n\n\n\u003C\u002Fdiv\u003E\n\n\u003Cdiv class=\"content-inner\"\u003E\n\n\n\n\n\u003Cdiv class=\"question\"\u003E\n\u003Ch2 class=\"question-title\"\u003E游戏中有哪些看上去很简单，但实际上需要极高技术力或是极高成本的细节？\u003C\u002Fh2\u003E\n\n\u003Cdiv class=\"answer\"\u003E\n\n\u003Cdiv class=\"meta\"\u003E\n\u003Cimg class=\"avatar\" src=\"http:\u002F\u002Fpic1.zhimg.com\u002Fv2-be06bed2527411c02f4ce4563c305e80_is.jpg\"\u003E\n\u003Cspan class=\"author\"\u003EDBinary，\u003C\u002Fspan\u003E\u003Cspan class=\"bio\"\u003E画画的，专画可爱的东西\u003C\u002Fspan\u003E\n\u003Ca href=\"https:\u002F\u002Fwww.zhihu.com\u002Fquestion\u002F405291121\u002Fanswer\u002F1335447014\" class=\"originUrl\" hidden\u003E查看知乎原文\u003C\u002Fa\u003E\n\u003C\u002Fdiv\u003E\n\n\u003Cdiv class=\"content\"\u003E\n\u003Cp\u003E \u003C\u002Fp\u003E\r\n\u003Cp\u003E游戏里有一个即使是小学生也会做，但博士生都未必做的好的问题。\u003C\u002Fp\u003E\r\n\u003Cp\u003E它是如此常见，几乎出现在除了&lt;&gt;外的所有的 FPS 游戏和绝大部分的 RTS 中。\u003C\u002Fp\u003E\r\n\u003Cp\u003E如果你打游戏发现你的 CPU 烫得可以煎牛排，那么当中恐怕有一半的热量和这玩意多多少少有所关联。\u003C\u002Fp\u003E\r\n\u003Cp\u003E它看上去真的超简单，我甚至不用堆些专业术语大家都看得懂，但在你没有真正把这玩意做出来之前，你对这玩意所述的一切算法和理论和不屑，都是在\"云\"。\u003C\u002Fp\u003E\r\n\u003Cp\u003E说了那么多，那么这玩意到底是啥，其实真也不是啥高大上的东西，这玩意叫\u003Cstrong\u003E碰撞检测\u003C\u002Fstrong\u003E。简单来说，就是判断游戏里两个物体有没有碰撞。我们先来举个最简单的栗子\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-35bc80da70c52b7d95568a2509a20fc6_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EObjectA 和 ObjectB 是游戏世界中的两个圆，如何判断它们有没有碰撞，你可能开始骂我了，因为只要长了眼睛就能看出来这两个圆没碰在一起。但可惜我们不能靠眼睛这么玩，计算机有计算机的玩法，当然，这仍然很简单。\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-01cb892512a91bf31e518c39ee514d52_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E设 Object A 的圆心坐标为（x1，y1）半径为 r1，设 Object B 的圆心坐标为（x2，y2）半径为 r2，然后我们计算圆心之间的距离 d 和 r1+r2，如果 d&lt;=r1+r2，那么这两个圆毫无疑问是碰撞在一起的，如果 d&gt;r1+r2，那么这两个圆就没碰在一起，如果你是码农你可能会用\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fwww.zhihu.com\u002Fequation?tex=d%5E%7B2%7D\" alt=\"\"\u003E和\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fwww.zhihu.com\u002Fequation?tex=%28r_1%2Br_2%29%5E2\" alt=\"\"\u003E来比较，这样就可能不用计算一次可能更耗时的开平方，不过没关系，这无关痛痒，这仍然超简单的是不。\u003C\u002Fp\u003E\r\n\u003Cp\u003E没关系，显然大部分游戏中只有 2 个 Object 的情况毕竟是少数，显然我们需要考虑 2 个以上 Object 的情况，比如说 3 个：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-9efcd36582cb4d3e6d0d1a0985e2d3a4_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E那么，如何判断这三个 Object 相互之间有没有碰撞关系呢，其实这也不是事儿，比如说上面三个 Object，我们只需要依据两两碰撞的办法，分别判断 A 和 B，A 和 C，B 和 C 之间有没有碰撞在一起就行了，我相信很大一部分初学了 C 语言，想做一个弹幕游戏大部分就使用了上面这个办法。\u003C\u002Fp\u003E\r\n\u003Cp\u003E但如果我们把 Object 数量加到 4 个，问题就来了。我们发现 2 个 Object 的时候，我们只需要计算一次碰撞判断，有 3 个 Object 的时候，这个计算增加到了 3 次，如果这个 Object 增加到了 4 个，那我们就需要计算 A-B，A-C，A-D，B-C，B-D，C-D 一共是 6 次碰撞检测计算。\u003C\u002Fp\u003E\r\n\u003Cp\u003E当然，6 次对于计算机来说这并不算什么，依据这种算法碰撞次数如果游戏中有 n 个 Object，我们就需要计算 \u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fwww.zhihu.com\u002Fequation?tex=%5Csum_%7Bi%3D1%7D%5E%7Bn-1%7D%7Bi%7D\" alt=\"\"\u003E 次碰撞，比如 101 个 Object 我们需要计算 100+99+98+97+……1，共计 5050 次碰撞，当然对 CPU 来说这仍然不算什么。但如果这个游戏是一个多人大型战场类游戏，你发现阵地上有 1000 发炮弹在到处飞时，你就可以闻到 CPU 的香气了。\u003C\u002Fp\u003E\r\n\u003Cp\u003E当然，要解决上面这个问题依然不是什么很难的事情，比如下面这种情况，一个游戏场景中有 4 个 Object：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-1e8e88346f81bdef2795414b34b8946c_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E我们把整个游戏世界均等分为 4 份\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-aa407d9d3cdbac6fd0b094950e43d83b_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E显然，我们可以先给游戏世界里的 Object 分个类，首先 A 和 B 在第一个区域，C 和 D 在第 4 个区域，显然的，不同区域之间的 Object 显然是不会碰撞在一起的，于是，我们只需要 2 次碰撞计算就可以得出碰撞结果了。这个算法又叫四叉树碰撞检测算法，按树结构的理解是，我们建立了一个有四个子节点的树结构，然后把游戏里的对象划分进去，没关系，反正其算法的原理大致就是一个分治的思想，不管怎么说，这确实很好地优化了碰撞检测的时间复杂度。\u003C\u002Fp\u003E\r\n\u003Cp\u003E到这一步，你呵呵一乐，就这？也没见多复杂啊，放心，相当一部分码农的理论也就到了这一步，所以成就了很多的\"云码农\"，坐好，现在我们开始加速了。\u003C\u002Fp\u003E\r\n\u003Cp\u003E某天你和你的基（姬）友相约上线吃鸡，图上每一个圆点代表着一个人，显然区域 4 肥得流油导致很多玩家纷纷下饺子，那么这个时候，四叉树分割的算法显然就不能发挥其最大的优势了，毕竟大部分的节点都分布在了区域 4 中：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-e1523b2330d9168d15b891ff46649c24_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E你说，这好办啊，兵来将挡水来土掩，我们对区域 4 再进行一次四叉树分割不就好了\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-1689163f46738af59e29bb1e5a3cd0df_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E你看，问题很好的解决了，这不也没啥大不了的不是，你甚至表示如果区域 4 里的 object 再多一点，你可以再分一次\u003C\u002Fp\u003E\r\n\u003Cp\u003E当你说到这句话的时候，你恐怕现在心里也有点发虚了，因为你注意到上面的分割算法中，有些 Object 是横跨了多个区域的\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-b632f48958dae3450525b845a0630af1_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E就比如上图中两个用蓝色框框框出来的那两个 Object，它们横跨了两个区域，这也就意味着，你必须对这两个 Object 进行分片。也就是说，四叉树的多个叶子需要同时存储这个 Object 的节点，实际上四叉树算法看上去很美，实际上对 Object 的分类实际上也是做了一次碰撞检测，当然横跨 2 个区域的情况并不是那么极端，假如现在一个玩家他变身成了奥特曼，变成了一个无比庞大的 Object（如下图的蓝色区域）：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-d0fe2e6b0779024db5306ce06ee89153_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E你发现，这个时候四叉树的优化对这个节点毫无作用，你还需要承担这个节点分割带来的额外性能开销，出现了一个负优化的结果，那么这个时候你该怎么办呢？这个时候恐怕有人会说，把这个那么大的 object 存储在四叉树的父节点不就行了，我们不分片，只要这个 Object 占据了所有子节点的区域，那么就将它存储在父节点中。\u003C\u002Fp\u003E\r\n\u003Cp\u003E当然，如果只是\"云代码\"的话，上面的处理是成立的，但是实际要做的话，上面的处理是沙雕的，没法搞的，纸上谈兵的。因为在四叉树的分类中，节点是一个一个添加进去的，你无法控制这个四叉树什么时候会进行进一步的划分，比如上面这个蓝色 Object 现在它当然占据了整个地图的所有节点，但是当最右下角的区域出现越来越多新的 Object 不得不进行进一步分片时，你就会发现这个蓝色的 Object 在父节点中待不下去了。\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-eddfb37f71a51a3e8a81882b33c4b0a8_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E好了，一旦出现这个情况，这个大型 Object 不再能待在覆盖所有子节点中的父节点了，你将不得不再对这个大型的 Object 进行一次额外开销的分片计算，然后再将它重新分发到各个子节点中。如果这种非常大的 Object 还很多的话，你发现你还不如一开始就将它进行分片呢。但这个办法并非不可取，如果你知道你游戏里这种比较大的 Object 并不多，这种父节点存储法也许真能对碰撞的复杂度进行优化，所以这仍然是我们说的，不同情况不同考虑，真以为四叉树就长这个样能解决所有的碰撞处理算法，抱歉，不存在的。\u003C\u002Fp\u003E\r\n\u003Cp\u003E好了，到这里现在开始，碰撞检测我就要只提问题不说解决办法了，为啥，因为难啊，不同情况需要依据游戏的情况进行不同情况的优化，我只是向你展示的是，碰撞检测并不像看上去那么简单。它仍然存在一堆问题需要你去解决。\u003C\u002Fp\u003E\r\n\u003Cp\u003E那么我们再举个栗子：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-029c0f8e49dedad89e90c5f3227edd92_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E问，上图中现在 ObjectA 是一个子弹，ObjectB 是一个怪兽，ObjectA 和 ObjectB 发生了碰撞，碰撞了几次？\u003C\u002Fp\u003E\r\n\u003Cp\u003E你可能很疑惑为什么我问了这样一个问题，但它确实是四叉树分片带来的又一个问题，如果 A，B 进行了分片，那么首先在分片过程中，A 和 B 因为分片同时存在了四叉树分割的两个区域中，这意味着在四叉树的最终计算结果中，它将在两个不同的区域都发生了碰撞，碰撞了两次，如果不将重复的碰撞结果进行剔除，那么，这个怪兽将会承受这个子弹带来的双倍伤害，当然怪兽这样都得偷着乐了，要是子弹和它刚好在四叉树的中间区域也就是横跨了四个区域，那么它将承受因为四叉树优化带来的四倍伤害。那么，你会如何剔除重复碰撞呢，当然，你得好好想想这个问题，不然你的四叉树优化，可能又是个负优化。\u003C\u002Fp\u003E\r\n\u003Cp\u003E截至目前，你看虽然我们讨论的是碰撞检测，仅仅一个四叉树就带来了那么多乱七八糟的问题了，没关系，我们现在讨论的还是算法方面的，如果你实际操刀写代码的话，你有没有想过四叉树是一个动态的结构，我们如何给四叉树的节点分配内存呢，\u003C\u002Fp\u003E\r\n\u003Cp\u003Emalloc？new？\u003C\u002Fp\u003E\r\n\u003Cp\u003E用了你就傻了，如果一个游戏里有 100 个 object，那么创建四叉树结构至少需要 100 次分配节点，这也就意味着你很可能需要向系统申请 100 次节点的内存，然后再用 100 次 delete 或者 free 释放掉，真的，你还不如不用四叉树呢，内存的分配与释放，可能比你直接计算碰撞还要慢，而且还能带来一堆内存碎片和缓存命中带来的一堆问题。\u003C\u002Fp\u003E\r\n\u003Cp\u003E于是你不得不重新接管内存的管理方式比如使用一个内存池来对这个四叉树结构进行管理，得，我们成功将碰撞检测这一个算法上的问题上升到了内存管理上的另一个问题，而且这两个问题你都得好好解决。因为不同类型的游戏，类似上面四叉树的空间划分算法还有很多，同时也带来了更多海量的问题，\u003C\u002Fp\u003E\r\n\u003Cp\u003E你会发现你很难找到一个万金油类型的碰撞检测算法，依据这个游戏的不同，你得分类考虑，然后在性能与游戏体验上找到一个平衡点，当然目前很多的游戏引擎并不需要你考虑这些碰撞算法，显然的，如果使用通用的算法，你就得在性能与空间上付出点代价。\u003C\u002Fp\u003E\r\n\u003Cp\u003E到这里你可能吐了一口气，原来还真是有些麻烦啊，抱歉，上面的东西考虑的只能说是凑活能用，其实只是冰山一角。\u003C\u002Fp\u003E\r\n\u003Cp\u003E因为游戏世界里的 Object，不是长的都是规规矩矩的一个圆。\u003C\u002Fp\u003E\r\n\u003Cp\u003E有这样的：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-c2ce07fac2c0a03d66a26ac86b345cbf_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E还有这样的：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-7aa7fce312b93aaf1c88c03dc9b306f9_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E当然，不规则几何的碰撞检测还只是\"碰撞检测\"，还没上升到\"碰撞\"问题的处理上来，比如隧穿效应和 PUBG 里的名场面粘滞效应。\u003C\u002Fp\u003E\r\n\u003Cp\u003E现在我们再来聊聊游戏世界是如何运行的，游戏世界的时间和我们现实世界的时间有所不一样，例如一辆汽车在高速公路上飞驰一秒钟，那么你可以得出它在 0.12345 秒时，这辆车的位置与状态，但如果这辆车跑在游戏世界中，这恐怕就办不到了。\u003C\u002Fp\u003E\r\n\u003Cp\u003E在游戏世界中，时间是离散的，一个称作游戏循环的逻辑结构控制着游戏世界的运行，一个称作时间粒度的变量是游戏世界时间运行的最小单位，在大多数情况下这个单位不会被进一步的细分。\u003C\u002Fp\u003E\r\n\u003Cp\u003E在每个游戏循环中，会对游戏世界中的每一个对象进行一次更新（当然有时会对视口外或一些静态对象优化），举个栗子，如果游戏世界的时间粒度是 10ms，那么，游戏世界将会计算 10ms，20ms，30ms……时游戏世界中对象的状态。\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-02ee8ee5091e9ad93a1904a26e069117_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E正因为这种运行方式，你会发现游戏世界的模拟并不能直接使用一些连续的函数来描述，例如游戏中弹道的计算或者抛物线方程，在游戏世界中未必好使，这类方程在现实中计算十分方便，毕竟我们可以直接用微积分等手段来计算出具体时间时的位置，速度，但在游戏中引用这类方程大多控制不便不利于优化设计复杂，这涉及一个将连续函数离散化的问题，因此，在一个游戏循环中，比如 10ms-20ms 这段时间里，在游戏世界中我们大多将这段时间的受力或者速度当做一个恒定的值因此你会发现，如果你要控制一个物体做抛物线运动，其最终的落点和你使用抛物线方程的落点最终会有所不一样，可以这么说，尽管 PUBG 游戏如何宣称这是一款真实的物理引擎，其最终都只是一个广告词，它与真实世界的模拟仍然有诸多的差别。\u003C\u002Fp\u003E\r\n\u003Cp\u003E这类离散的差别也导致了一些很有意思的 bug，其中一个便是遂穿效应，例如在上面的图中，10ms 和 20ms 中出现了一堵墙。\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6ed382f99188c9bea0a8658711da6c73_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E那么，这个碰撞根本不会发生，就好像汽车穿过了这堵墙一样，如果要避免这种情况，要么把墙体的宽度变宽点，要么就减少时间粒度比如控制在 5ms。\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-04dfcd7f1435ba0efa16ba621e71a692_b.jpg\" alt=\"\"\u003E\u003Cfigcaption\u003E放大墙体宽度\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-86cca9440be435aac3e8624df6cb7d08_b.jpg\" alt=\"\"\u003E\u003Cfigcaption\u003E减少时间粒度\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E但正如你所知道的一样，因为每次循环都需要对游戏中所有需要更新的物体进行一次计算，因此，减少时间粒度所耗费的性能损耗往往是非常明显的，在大多数情况下，游戏设计人员会刻意减少游戏里物体的速度或者说使用第一种办法把物体做的厚一点。\u003C\u002Fp\u003E\r\n\u003Cp\u003E另一个很有意思的 bug 是粘滞，这也是碰撞检测方面的 bug，在众多即使是 3A 大作的游戏中，这个 bug 也非常的常见并且优化困难，避免需要耗费巨大的代价，我们同样举个栗子。\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-5b3997c8e06c81d33eb8eaafe1a1f121_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E在上图中，一辆车装上了一个球，因为时间粒度关系，当碰撞发生时，车已经嵌入到球当中了，这个时候碰撞已经发生，按照\"真实的物理引擎\"计算，车应该受到一个立即的反作用力，并速度方向应该立即变为反方向：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f2e63bb76ac80c18d0877bf0ffd1ae29_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E但是，因为碰撞存在能量损失，因此，回退的速度会比撞击时的瞬时速度更慢，导致了在下一次游戏循环时，车仍然没有脱离球的范围，这导致了物理引擎认为，车第二次撞上了球（实际碰撞只发生了一次），于是车又改变了速度方向，再次撞入了球，因为速度再次衰减，所以车就和这个球粘上了，如果两者状态不改变将并永远不会脱离：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-0e4a561d9ec5141422861a4c12d25933_b.jpg\" alt=\"\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E这就导致了两个物体黏在一块，两边反复抖动，最终导致了神奇的鬼畜现象，如果碰撞是有伤害的，那么就会导致粘滞发生后不久就会瞬间爆炸：\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-a61465f96e1c36de0d3fa2368c46d8ec_b.gif\" alt=\"\"\u003E\u003Cfigcaption\u003E出自天天吃鸡\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure\u003E\u003Cimg class=\"content-image\" src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-de5739baf3cd1bc4cbe6a01f18f39107_b.gif\" alt=\"\"\u003E\u003Cfigcaption\u003E出自天天吃鸡\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E写了那么多，但其实碰撞检测有关的东西远不止上面说的那么点，游戏引擎开发的事儿，说多了都是泪，很多东西看上去很简单。但经验告诉我常常是理想很丰满现实很骨感。在做出来之前一切的感觉只是感觉。\u003C\u002Fp\u003E\r\n\u003Cfigure\u003E\u003C\u002Ffigure\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\u003Cdiv class=\"view-more\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.zhihu.com\u002Fquestion\u002F405291121\"\u003E查看知乎讨论\u003Cspan class=\"js-question-holder\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\u003Cscript type=“text\u002Fjavascript”\u003Ewindow.daily=true\u003C\u002Fscript\u003E","imageHue":"0x4a4434","imageSource":"VladArtist \u002F CC0","title":"想检测游戏里两个物体有没有发生碰撞，原来这么难","url":"https:\u002F\u002Fdaily.zhihu.com\u002Fstory\u002F9725890","image":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-126e0df3181fc087c7e4335eacc5cba0.jpg","shareUrl":"http:\u002F\u002Fdaily.zhihu.com\u002Fstory\u002F9725890","js":[],"id":9725890,"gaPrefix":"071407","images":["https:\u002F\u002Fpic1.zhimg.com\u002Fv2-3903eb7e3976869eb3b729492a00ccb4.jpg"],"type":0,"section":{"thumbnail":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-3903eb7e3976869eb3b729492a00ccb4.jpg","name":"奇怪的知识","id":116},"css":["http:\u002F\u002Fnews-at.zhihu.com\u002Fcss\u002Fnews_qa.auto.css?v=4b3e3"]}},"explore":{"recommendations":{},"specials":{"entities":{},"order":[]},"roundtables":{"entities":{},"order":[]},"collections":{},"columns":{}},"relatedReadings":{},"hotQuestions":{},"pushNotifications":{"default":{"isFetching":false,"isDrained":false,"ids":[]},"follow":{"isFetching":false,"isDrained":false,"ids":[]},"vote_thank":{"isFetching":false,"isDrained":false,"ids":[]},"currentTab":"default","notificationsCount":{"default":0,"follow":0,"vote_thank":0}},"messages":{"data":{},"currentTab":"common","messageCount":0},"pins":{"reviewing":{}},"pin":{"pin":null,"author":null,"comments":[],"pins":{},"special":{},"daily":{}},"captcha":{"captchaNeeded":false,"captchaValidated":false,"captchaBase64String":null,"captchaValidationMessage":null,"loginCaptchaExpires":false},"login":{"loginUnregisteredError":false,"loginBindWechatError":false,"loginConfirmError":null,"sendDigitsError":null,"needSMSIdentify":false,"validateDigitsError":false,"loginConfirmSucceeded":null,"qrcodeLoginToken":"","qrcodeLoginScanStatus":0,"qrcodeLoginError":null,"qrcodeLoginReturnNewToken":false},"register":{"registerValidateSucceeded":null,"registerValidateErrors":{},"registerConfirmError":null,"sendDigitsError":null,"registerConfirmSucceeded":null},"topic":{"bios":{},"hot":{},"newest":{},"top":{},"unanswered":{},"questions":{},"followers":{},"contributors":{},"parent":{},"children":{},"bestAnswerers":{},"wikiMeta":{},"index":{},"intro":{},"meta":{},"schema":{},"creatorWall":{},"wikiEditInfo":{},"committedWiki":{},"landingBasicData":{},"landingExcellentItems":[],"landingExcellentEditors":[],"landingCatalog":[],"landingEntries":{}},"drama":{},"topstory":{"recommend":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"follow":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followWonderful":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"sidebar":null,"announcement":{},"hotListCategories":[],"hotList":[],"guestFeeds":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followExtra":{"isNewUser":null,"isFetched":false,"followCount":0,"followers":[]}},"search":{"recommendSearch":[],"topSearch":{},"searchValue":{},"suggestSearch":{},"attachedInfo":{},"nextOffset":{},"topicReview":{},"generalByQuery":{},"generalByQueryInADay":{},"generalByQueryInAWeek":{},"generalByQueryInThreeMonths":{},"peopleByQuery":{},"clubentityByQuery":{},"clubPostByQuery":{},"topicByQuery":{},"columnByQuery":{},"liveByQuery":{},"albumByQuery":{},"eBookByQuery":{},"kmGeneralByQuery":{}},"story":{},"spread":{"spreadData":{}},"gift":{"gotStatus":false,"participated":false,"isSuccess":false,"phoneNo":""},"interestZone":{"interestZone":[],"feedsList":{}},"videoTopic":{"topData":{},"data":[],"isLoading":false,"isDrained":false,"next":""},"readStatus":{},"news":{"special":{"topic":{},"bgItems":[],"inDepthModule":{},"pinItems":[],"showButton":false}},"themeColors":{},"creator":{"currentCreatorUrlToken":null,"homeData":{"recommendQuestions":[]},"tools":{"question":{"invitationCount":{"questionFolloweeCount":0,"questionTotalCount":0},"goodatTopics":[]},"customPromotion":{"itemLists":{}},"recommend":{"recommendTimes":{}}},"explore":{"academy":{"tabs":[],"article":{}}},"rights":[],"rightsStatus":{},"levelUpperLimit":10,"account":{"growthLevel":{}},"mcn":{},"applyStatus":{}},"emoticons":{"emoticonGroupList":[],"emoticonGroupDetail":{}},"authorize":{},"theater":{"sideFeeds":{},"debates":{"data":[],"lastDebateApply":{}},"theaters":{},"finishInfos":{},"forecasts":{},"messages":{}},"ranking":{},"knowledgePlan":{"lists":{},"allCreationRankList":{},"featuredQuestions":{}},"topsearch":{},"collections":{"hot":{"data":[],"paging":{},"isLoading":false},"collectionFeeds":{}},"searchSpecial":{"contents":[],"navigators":[]}},"subAppName":"mobile"}</script><script src="https://hm.baidu.com/hm.js?98beee57fd2ef70ccdd5ca52b9740c49" async=""></script><script src="https://zz.bdstatic.com/linksubmit/push.js" async=""></script><script src="https://unpkg.zhimg.com/za-js-sdk@2.16.1/dist/zap.js"></script><div><div style="display: none;">想来知乎工作？请发送邮件到 jobs@zhihu.com</div></div><div><div><div class="css-8pdeid"></div></div></div></body></html>